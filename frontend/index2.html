<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Exerício Semana Front-End</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    
    <link rel="stylesheet" href="css/estilo.css">

    <link rel="stylesheet" href="css/gradientes.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        $(document).ready(function () {
            $("#staticBackdrop").modal('show');
        });
    </script>
    
</head>

<body> 
    <!-- Modal -->
    <!-- <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-danger" id="staticBackdropLabel">Atribuição de Conteúdo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Os vetores desse projeto foram retirados do site Freepik, no seguinte link:</p>
                    <a href="https://www.freepik.com/free-vector/weather-extended-forecast-computer-paper-decorative-widgets-with-sun-clouds-rain-snow-icons-vector-illustration_1158408.htm#page=1&query=weather%20widget&position=1&from_view=search">Weather Forecast vector created by macrovector -
                        www.freepik.com</a>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-info text-light" data-bs-dismiss="modal">Ok</button>
                </div>
            </div>
        </div>
    </div> -->
    <!-- Fim do Modal -->
    <div class="container p-3">
        <div class="row">
            <div class="col">
                <div id="fundoPrincipal" class="card shadow-lg mx-0 my-2 mb-3">
                    <div class="card-body p-0">
                        <div class="p-3">
                            <div class="row">
                                <h1 id="cidade" class="card-title text-center"></h1>
                            </div>
                            <div class="row">
                                <div class="col-3 text-end me-0 pe-0">
                                    <h1 id="diaSemanaHoje" class="card-title"></h1>
                                </div>
                                <div class="col-3 text-end me-0 pe-0">
                                    <h1 id="diaHoje" class="card-title"></h1>
                                </div>
                                <div class="col-3 text-start ms-0 ps-1">
                                    <h1 id="mesHoje" class="card-title"></h1>
                                </div>
                                <div class="col-3 text-start ms-0 ps-0">
                                    <h1 id="agora" class="card-title"></h1>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col text-center">
                                    <img id="imagemHoje" src="img/carregando.svg" class="card-img-end carregando"
                                        alt="...">

                                </div>
                            </div>
                            <div class="row my-3">
                                <div class="col">
                                    <img id="imagemTemperaturaHoje" src="img/temperature_regular.svg"
                                        class="card-img-end carregando my-0" alt="...">
                                </div>
                                <div class="col text-center ps-2">
                                    <p id="temperaturaChoje" class="fw-2 fs-1 mb-0"></p>
                                </div>

                                <div class="col text-center ps-2">
                                    <p id="temperaturaFhoje" class="fw-2 fs-1 mb-0"></p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-5">
                                    <p class="mb-0 text-center">Umidade: <span id="umidade"></span> %</p>
                                    <p class="mb-0 text-center">Vento: <span id="velocidadeVento"></span></p>
                                </div>
                                <div class="col">
                                    <p class="mb-0 text-center">Nascer do Sol: <span id="nascerDoSol"></span></p>
                                    <p class="mb-0 text-center">Pôr do Sol: <span id="porDoSol"></span></p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col text-center">
                                    <p class="mb-0">Sensação Térmica: <span id="sensacaoTermicaHoje"></span> °C</p>
                                </div>
                            </div>
                            <h1 id="descricaoHoje" class="card-title text-center mt-3"></h1>
                        </div>


                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col ">
                <div id="widget-compact-header-1"
                    class="card fundo1 shadow-lg mx-0 widget-compact-header">
                    <div class="card-body p-0 tex">
                        <div class="p-3">
                            <div class="row">
                                <div class="col-5 text-start pt-1">
                                    <h1 class="fw-bold">Segunda</h1>
                                </div>
                                <div class="col-3 text-center">
                                    <img src="img\rain.svg" class="img-s" alt="...">
                                </div>
                                <div class="col-4 text-end pt-1">
                                    <h1 class="fw-bolder">30°C</h1>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col">
                <div id="widget-compact-1" class="mx-2 p-3 widget-compact">
                    <div class="p-3">
                        <div class="row">
                            <div class="col text-center mb-2">
                                <h2><span id="diaAmanha"></span> <span id="mesAmanha"></span></h2>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center">
                                <img src="img\rain.svg" class="card-img-end" alt="...">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center">
                                <p class="fw-2 fs-1 mb-0">30<span class="ms-2">ºC</span></p>
                            </div>
                            <div class="col text-center">
                                <p class="fw-2 fs-1 mb-0">87,8<span class="ms-2">ºF</span></p>
                            </div>
                        </div>
                        <h1 class="card-title text-center">Poucas nuvens</h1>
                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col ">
                <div id="widget-compact-header-2"
                    class="card fundo1 shadow-lg mx-0 widget-compact-header">
                    <div class="card-body p-0 tex">
                        <div class="p-3">
                            <div class="row">
                                <div class="col-5 text-start pt-1">
                                    <h1 class="fw-bold">Terça</h1>
                                </div>
                                <div class="col-3 text-center">
                                    <img src="img\rain.svg" class="img-s" alt="...">
                                </div>
                                <div class="col-4 text-end pt-1">
                                    <h1 class="fw-bolder">30°C</h1>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div id="widget-compact-2" class="mx-2 p-3 widget-compact">
                    <div class="p-3">
                        <div class="row">
                            <div class="col text-center mb-2">
                                <h2>30 nov</h2>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center">
                                <img src="img\rain.svg" class="card-img-end" alt="...">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center">
                                <p class="fw-2 fs-1 mb-0">30<span class="ms-2">ºC</span></p>
                            </div>
                            <div class="col text-center">
                                <p class="fw-2 fs-1 mb-0">87,8<span class="ms-2">ºF</span></p>
                            </div>
                        </div>
                        <h1 class="card-title text-center">Chuvas esparsas</h1>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- <img src="img\C.svg"></svg>
    <img src="img\moon_cloud.svg"></svg>
    <img src="img\moon.svg"></svg>
    <img src="img\rain.svg"></svg>
    <img src="img\rain2.svg"></svg>
    <img src="img\storm.svg"></svg>
    <img src="img\storm2.svg"></svg>
    <img src="img\sun_cloud.svg"></svg>
    <img src="img\sun.svg"></svg>
    <img src="img\temperature_high.svg"></svg>
    <img src="img\temperature_regular.svg"></svg>
    <img src="img\temperature_low.svg"></svg> -->

    <script>
        $("#widget-compact-1").hide();
        $("#widget-compact-2").hide();
        $("#widget-compact-header-1").click(function () {
            $("#widget-compact-1").toggle(600, "swing");
        });
        $("#widget-compact-header-2").click(function () {
            $("#widget-compact-2").toggle(600, "swing");
        });
    </script>
    <script src="dados_em_json.js"></script>
    <script src="script.js"></script>
    <script>
        const hoje = new Date();

        const agora = corrigeHora(hoje.getHours().toString() + ':' + hoje.getMinutes().toString());

        const mesHoje = mesAno[hoje.getMonth()];

        const nascerDoSol = convertTime12To24(dados_em_json['results']['sunrise']);
        const porDoSol = convertTime12To24(dados_em_json['results']['sunset']);

        let fundoPrincipal = document.getElementById("fundoPrincipal");
        fundoPrincipal =
            alteraFundoDeAcordoComHoraDoDia(fundoPrincipal, agora);

        const cidade = dados_em_json['results']['city']
        document.getElementById('cidade').innerHTML = cidade;

        const umidade = dados_em_json['results']['humidity']
        document.getElementById('umidade').innerHTML = umidade;

        const velocidadeVento = Math.round(dados_em_json['results']['wind_speedy'].substring(0, dados_em_json['results']['wind_speedy'].indexOf(' ')));
        document.getElementById('velocidadeVento').innerHTML = velocidadeVento + ' km/h';


        const amanha = new Date();
        amanha.setDate(amanha.getDate() + 1);
        const diaAmanha = amanha.getDate();
        const diaSemanaAmanha = diaSemana[amanha.getDay()];
        const mesAmanha = mesAno[amanha.getMonth()];

        document.getElementById('diaSemanaHoje').innerHTML = diaSemana[hoje.getDay()];
        document.getElementById('agora').innerHTML = agora;
        document.getElementById('diaHoje').innerHTML = hoje.getDate();
        document.getElementById('mesHoje').innerHTML = mesHoje;
        document.getElementById('nascerDoSol').innerHTML = nascerDoSol;
        document.getElementById('porDoSol').innerHTML = porDoSol;


        document.getElementById('diaAmanha').innerHTML = diaAmanha;
        document.getElementById('mesAmanha').innerHTML = mesAmanha;


        setTimeout(() => { inicializacoesDependentesDoTempo() }, 500);



        function inicializacoesDependentesDoTempo() {

            const descricaoHoje = dados.responseJSON[0]['condicao'];
            document.getElementById('descricaoHoje').innerHTML = descricaoHoje;

            const temperaturaChoje = dados.responseJSON[0]['temperaturaC'];
            document.getElementById('temperaturaChoje').innerHTML = temperaturaChoje + '°C';

            const temperaturaFhoje = deCelsiusParaFahrenheit(temperaturaChoje);
            document.getElementById('temperaturaFhoje').innerHTML = temperaturaFhoje + ' F';

            const sensacaoTermicaHoje = sensacaoTermica(velocidadeVento, temperaturaChoje);
            document.getElementById('sensacaoTermicaHoje').innerHTML = sensacaoTermicaHoje;

            const imagemHoje = getImagem(descricaoHoje, agora, nascerDoSol, porDoSol);

            const imagemTemp = getImagemTemperatura(temperaturaChoje);

            document.getElementById('imagemHoje').classList.remove('carregando');
            document.getElementById('imagemHoje').src = imagemHoje;

            document.getElementById('imagemTemperaturaHoje').src = imagemTemp;

        }
    </script>
</body>

</html>
